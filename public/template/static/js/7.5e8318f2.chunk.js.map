{"version":3,"sources":["pages/share/styles.js","pages/share/index.js","api/index.js","components/common/icon/index.js","assets/images/defaultAvatar.png","context/actions/user.js","components/common/header/styles.js","components/common/header/index.js","components/sidebar/styles.js","components/sidebar/index.js"],"names":["Wrapper","styled","div","Container","LeftContent","ShareWrapper","ShareNav","Title","Button","ShareContainer","Panel","Main","Avatar","img","Textarea","textarea","MainContent","Photo","CloseIcon","ImgContainer","VideoContainer","ShareOptions","ShareOption","ShareItem","Label","ShareBottom","SubmitBtn","button","RightContent","Share","history","useState","photos","formData","setFormData","loading","setLoading","user","useSelector","state","useRef","handleData","name","value","uploadFile","a","target","files","length","isImg","test","file","fileName","Date","now","data","FormData","append","API","src","checkData","desc","submit","userId","_id","replace","type","onClick","goBack","className","LoadingOutlined","avatar","defaultAvatar","placeholder","onChange","e","current","scrollHeight","offsetHeight","style","height","ref","map","photo","index","CloseCircleOutlined","splice","deletePhotoItem","width","preview","controls","htmlFor","display","id","accept","axios","create","baseURL","interceptors","request","use","req","NProgress","start","getUserInfo","headers","authorization","token","err","Promise","reject","response","res","done","login","post","register","upload","getUser","get","updateUser","getPosts","createPost","getSelfPosts","IconFont","createFromIconfontCN","scriptUrl","Icon","props","dispatch","message","LOGIN","payload","ROUTES","logout","LOGOUT","Logo","Search","Menus","MenuItem","Header","useHistory","location","pathname","includes","push","username","UserInfo","Recommend","ProfileList","ProfileItem","ProfileAvatar","Sidebar","useDispatch","Actions"],"mappings":"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","file":"static/js/7.5e8318f2.chunk.js","sourcesContent":["import styled from \"styled-components\";\r\nimport tw from \"twin.macro\";\r\n\r\nexport const Wrapper = styled.div`\r\n  ${tw`h-screen\tw-screen  bg-gray-50`}\r\n`;\r\n\r\nexport const Container = styled.div`\r\n  ${tw`w-full flex md:w-4/5 2xl:max-w-screen-lg mx-auto h-full`}\r\n`;\r\n\r\nexport const LeftContent = styled.div`\r\n  ${tw`flex-1 overflow-y-auto\th-full  pb-32`}\r\n`;\r\n\r\nexport const ShareWrapper = styled.div``;\r\n\r\nexport const ShareNav = styled.div`\r\n  ${tw`flex bg-white px-4 h-11  items-center \r\njustify-between  sm:flex`}\r\n  >span {\r\n    ${tw`text-xl font-semibold`}\r\n  }\r\n`;\r\n\r\nexport const Icon = styled.div`\r\n  ${tw`w-6 h-6 bg-gray-300`}\r\n`;\r\n\r\nexport const Title = styled.div`\r\n  ${tw`text-sm font-medium`}\r\n`;\r\n\r\nexport const Button = styled.div`\r\n  ${tw`text-sm text-blue-200 font-medium hover:cursor-not-allowed`}\r\n  &.active {\r\n    ${tw`text-blue-400 hover:cursor-pointer`}\r\n  }\r\n`;\r\n\r\nexport const ShareContainer = styled.div`\r\n  > div {\r\n    ${tw`bg-white text-xs sm:text-sm  flex justify-between border-b border-t border-gray-300 mb-3`}\r\n  }\r\n`;\r\n\r\nexport const Panel = styled.div`\r\n  ${tw`p-4`}\r\n`;\r\n\r\nexport const Main = styled.div`\r\n  ${tw`flex-1 px-3 relative flex flex-col`}\r\n`;\r\nexport const Avatar = styled.img`\r\n  ${tw`w-8 h-8 bg-gray-200 rounded-full object-cover`}\r\n`;\r\n\r\nexport const Textarea = styled.textarea`\r\n  ${tw`w-full h-auto max-h-24\ttext-sm overflow-y-auto\t focus:outline-none`}\r\n`;\r\n\r\nexport const MainContent = styled.div`\r\n  /* ${tw`grid gap-3 grid-cols-3`} */\r\n`;\r\n\r\nexport const Photo = styled.div`\r\n  ${tw`relative mt-2`}\r\n`;\r\n\r\nexport const CloseIcon = styled.div`\r\n${tw`absolute top-2 right-3 z-10`}\r\nspan {\r\n  ${tw`text-xl text-white hover:cursor-pointer`}\r\n}\r\n`\r\n\r\nexport const ImgContainer = styled.div`\r\n  ${tw`relative`}\r\n`;\r\n\r\nexport const VideoContainer = styled.div``;\r\n\r\nexport const ShareOptions = styled.div`\r\n  ${tw`flex mt-2`}\r\n`;\r\n\r\nexport const ShareOption = styled.div`\r\n  ${tw`flex items-center mr-4`}\r\n  >* {\r\n    ${tw`flex items-center`}\r\n  }\r\n\r\n  strong {\r\n    ${tw`pl-1 flex-shrink-0 font-medium text-gray-600`}\r\n  }\r\n`;\r\n\r\nexport const ShareItem = styled.div`\r\n  ${tw`px-4 py-3 flex items-center justify-between`}\r\n`;\r\n\r\nexport const Label = styled.div``;\r\n\r\nexport const ShareBottom = styled.div`\r\n  ${tw`hidden justify-end px-4 py-3 bg-white sm:hidden`}\r\n`;\r\n\r\nexport const SubmitBtn = styled.button`\r\n  ${tw`text-center  py-1    text-blue-400 font-medium hover:text-blue-300`}\r\n`;\r\n\r\nexport const RightContent = styled.div`\r\n  ${tw`hidden sm:block w-1/3`}\r\n`;\r\n","import React, { useState, useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Image } from \"antd\";\r\nimport { LoadingOutlined, CloseCircleOutlined } from \"@ant-design/icons\";\r\n\r\nimport Header from \"../../components/common/header\";\r\nimport Sidebar from \"../../components/sidebar\";\r\nimport Icon from \"../../components/common/icon\";\r\n\r\nimport * as API from \"../../api\";\r\n\r\nimport defaultAvatar from \"../../assets/images/defaultAvatar.png\";\r\n\r\nimport {\r\n  Wrapper,\r\n  Container,\r\n  LeftContent,\r\n  ShareWrapper,\r\n  ShareNav,\r\n  Title,\r\n  Button,\r\n  ShareContainer,\r\n  Panel,\r\n  Avatar,\r\n  Textarea,\r\n  MainContent,\r\n  Photo,\r\n  CloseIcon,\r\n  ImgContainer,\r\n  VideoContainer,\r\n  Main,\r\n  ShareOptions,\r\n  ShareOption,\r\n  ShareItem,\r\n  Label,\r\n  ShareBottom,\r\n  SubmitBtn,\r\n  RightContent,\r\n} from \"./styles\";\r\n\r\nconst Share = ({ history, ...props }) => {\r\n  const PF = \"\"\r\n\r\n  const [formData, setFormData] = useState({\r\n    photos: [],\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { user } = useSelector((state) => state);\r\n  const textarea = useRef(null);\r\n\r\n  const handleData = ({ name, value }) => {\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const onEdit = (e) => {\r\n    handleData(e.target);\r\n\r\n    if (textarea.current.scrollHeight >= textarea.current.offsetHeight) {\r\n      textarea.current.style.height = textarea.current.scrollHeight + \"px\";\r\n    }\r\n  };\r\n\r\n  const uploadFile = async ({ target }) => {\r\n    if (!target.files.length) return;\r\n\r\n    const isImg = /\\.(png|jpg|gif|jpeg|webp)$/.test(target.value);\r\n\r\n    const file = target.files[0];\r\n    const fileName = Date.now() + file.name;\r\n    const data = new FormData();\r\n    data.append(\"name\", fileName);\r\n    data.append(\"file\", file);\r\n    await API.upload(data);\r\n    handleData({\r\n      name: \"photos\",\r\n      value: [\r\n        ...formData?.photos,\r\n        {\r\n          isImg,\r\n          src: fileName,\r\n        },\r\n      ],\r\n    });\r\n  };\r\n\r\n  const deletePhotoItem = (index) => {\r\n    let photos = formData.photos;\r\n    photos.splice(index, 1);\r\n    setFormData({\r\n      ...formData,\r\n      photos,\r\n    });\r\n  };\r\n\r\n  const checkData = () => {\r\n    const { desc, photos } = formData;\r\n    return desc && photos.length;\r\n  };\r\n\r\n  const submit = async () => {\r\n    if (loading) return;\r\n    if (!checkData()) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      await API.createPost({\r\n        ...formData,\r\n        userId: user._id,\r\n      });\r\n      setLoading(false);\r\n      history.replace(\"/\");\r\n    } catch (error) {}\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Header />\r\n      <Container>\r\n        <LeftContent>\r\n          <ShareWrapper>\r\n            <ShareNav>\r\n              <Icon type=\"icon-arrow-left\" onClick={() => history.goBack()} />\r\n              <Title>新帖子</Title>\r\n              <Button className={checkData() && \"active\"} onClick={submit}>\r\n                {loading ? <LoadingOutlined /> : \"分享\"}\r\n              </Button>\r\n            </ShareNav>\r\n            <ShareContainer>\r\n              <Panel>\r\n                <Avatar src={user.avatar || defaultAvatar} />\r\n                <Main>\r\n                  <Textarea\r\n                    placeholder=\"分享你的趣事\"\r\n                    name=\"desc\"\r\n                    onChange={onEdit}\r\n                    ref={textarea}\r\n                  />\r\n                  <MainContent>\r\n                    {formData?.photos.map((photo, index) => (\r\n                      <Photo key={photo.src}>\r\n                        <CloseIcon>\r\n                          <CloseCircleOutlined\r\n                            onClick={() => deletePhotoItem(index)}\r\n                          />\r\n                        </CloseIcon>\r\n                        {photo.isImg ? (\r\n                          <ImgContainer>\r\n                            <Image\r\n                              width=\"100%\"\r\n                              preview={false}\r\n                              src={PF + photo.src}\r\n                            />\r\n                          </ImgContainer>\r\n                        ) : (\r\n                          <VideoContainer>\r\n                            <video src={PF + photo.src} controls></video>\r\n                          </VideoContainer>\r\n                        )}\r\n                      </Photo>\r\n                    ))}\r\n                  </MainContent>\r\n                  <ShareOptions>\r\n                    {/* <ShareOption>\r\n            <Upload status=\"uploading\" name=\"file\" customRequest={uploadFile}>\r\n              <Icon />\r\n              <strong>照片/视频</strong>\r\n            </Upload>\r\n          </ShareOption> */}\r\n                    <ShareOption>\r\n                      <label htmlFor=\"file\">\r\n                        <Icon type=\"icon-photo\" />\r\n                        <strong>照片/视频</strong>\r\n                        <input\r\n                          style={{ display: \"none\" }}\r\n                          type=\"file\"\r\n                          id=\"file\"\r\n                          accept=\"image/*,video/*\"\r\n                          onChange={(e) => uploadFile(e)}\r\n                        />\r\n                      </label>\r\n                    </ShareOption>\r\n\r\n                    <ShareOption>\r\n                      <Icon type=\"icon-bookmark\" />\r\n                      <strong>#标签</strong>\r\n                    </ShareOption>\r\n                    {/* <ShareOption>\r\n                      <Icon />\r\n                      <strong>权限</strong>\r\n                    </ShareOption> */}\r\n                    <ShareOption>\r\n                      <Icon type=\"icon-emoji\" />\r\n                      <strong>表情</strong>\r\n                    </ShareOption>\r\n                  </ShareOptions>\r\n                </Main>\r\n              </Panel>\r\n              <ShareItem>\r\n                <Label>添加地点</Label>\r\n                <Icon type=\"icon-arrow-right\" />\r\n              </ShareItem>\r\n              <ShareItem>\r\n                <Label>标记用户</Label>\r\n                <Icon type=\"icon-arrow-right\" />\r\n              </ShareItem>\r\n            </ShareContainer>\r\n            <ShareBottom>\r\n              <SubmitBtn>分享</SubmitBtn>\r\n            </ShareBottom>\r\n          </ShareWrapper>\r\n        </LeftContent>\r\n        <RightContent>\r\n          <Sidebar history={history} />\r\n        </RightContent>\r\n      </Container>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Share;\r\n","import axios from \"axios\";\r\nimport NProgress from \"nprogress\";\r\nimport \"nprogress/nprogress.css\";\r\n\r\nimport { getUserInfo } from \"../utils/auth\";\r\n\r\nconst API = axios.create({ baseURL: \"/api\" });\r\n\r\nAPI.interceptors.request.use(\r\n  (req) => {\r\n    NProgress.start();\r\n    const user = getUserInfo();\r\n    if (user) {\r\n      req.headers.authorization = user?.token;\r\n    }\r\n\r\n    return req;\r\n  },\r\n  (err) => {\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nAPI.interceptors.response.use(\r\n  (res) => {\r\n    NProgress.done();\r\n    return res?.data;\r\n  },\r\n  (err) => {\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nexport default API;\r\n\r\nexport const login = (data) => API.post(\"/auth/login\", data);\r\nexport const register = (data) => API.post(\"/auth/register\", data);\r\n\r\nexport const upload = (data) => API.post(\"/upload\", data);\r\n\r\nexport const getUser = (id) => API.get(`/users/${id}`);\r\nexport const updateUser = (data)=>API.post('/users/update',data)\r\n\r\nexport const getPosts = () => API.get(\"/posts\");\r\nexport const getPost = (id) => API.get(`/posts/${id}`);\r\nexport const createPost = (data) => API.post(\"/posts/create\", data);\r\nexport const followingPost = (data) => API.get(\"/posts/following\", data);\r\nexport const updatePost = (id, data) => API.put(`/posts/update/${id}`, data);\r\nexport const deletePost = (id, data) => API.delete(`/posts/delete/${id}`, data);\r\nexport const likePost = (id) => API.put(`/posts/like/${id}`);\r\nexport const getSelfPosts = (data) => API.post(`/posts/self`, data);\r\n","import { createFromIconfontCN } from \"@ant-design/icons\";\r\n\r\nconst IconFont = createFromIconfontCN({\r\n  scriptUrl: [\"//at.alicdn.com/t/font_2765586_syr9956cube.js\"],\r\n});\r\n\r\nconst Icon = ({ type, ...props }) => {\r\n  return (\r\n    <>\r\n      <IconFont {...{ ...props, type }} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Icon;\r\n","export default __webpack_public_path__ + \"static/media/defaultAvatar.53189188.png\";","import * as API from \"../../api\";\r\nimport * as ROUTES from '../../constants/routes'\r\nimport { LOGIN, LOGOUT } from \"../../constants/actionTypes\";\r\n\r\nexport const login = (formData, err) => async (dispatch) => {\r\n  const res = await API.login(formData);\r\n  if (res.message) {\r\n    return err(res.message);\r\n  }\r\n  dispatch({ type: LOGIN, payload: res });\r\n};\r\n\r\nexport const register = (formData, history, err) => async (dispatch) => {\r\n  const res = await API.register(formData);\r\n  if (res.message) {\r\n    return err(res.message);\r\n  }\r\n  history.replace(ROUTES.LOGIN)\r\n};\r\n\r\nexport const logout = {\r\n  type: LOGOUT,\r\n};\r\n","import styled from \"styled-components\";\r\nimport tw from \"twin.macro\";\r\n\r\nexport const Wrapper = styled.div`\r\n  ${tw`h-14 w-full bg-white sticky top-0 shadow border-b \r\n  border-gray-100 `}\r\n`;\r\nexport const Container = styled.div`\r\n  ${tw`w-full px-2 sm:px-0 md:w-4/5 2xl:max-w-screen-lg mx-auto h-full flex items-center`}\r\n`;\r\n\r\nexport const Logo = styled.img`\r\n  ${tw`object-contain h-8`}\r\n`;\r\n\r\nexport const Search = styled.div`\r\n  ${tw`sm:flex hidden w-52 mx-auto text-sm text-gray-600 items-center justify-center\t h-7 bg-gray-50 border border-gray-300`}\r\n  >span {\r\n    ${tw`mr-2`}\r\n  }\r\n`;\r\nexport const Input = styled.div``;\r\n\r\nexport const Menus = styled.div`\r\n  ${tw` fixed left-0 bottom-0 w-full bg-white py-1 justify-around sm:py-0 sm:w-auto sm:justify-start sm:relative flex ml-auto sm:ml-0`}\r\n`;\r\n\r\nexport const MenuItem = styled.div`\r\n  ${tw`w-6 h-6 flex items-center justify-center  m-2 hover:cursor-pointer`}\r\n  >span {\r\n    ${tw`text-2xl`}\r\n  }\r\n`;\r\n\r\nexport const Avatar = styled.img`\r\n  ${tw`w-6 h-6 rounded-full object-cover flex-shrink-0`}\r\n`;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\nimport * as ROUTES from \"../../../constants/routes\";\r\nimport Icon from \"../icon\";\r\nimport defaultAvatar from \"../../../assets/images/defaultAvatar.png\";\r\n\r\nimport {\r\n  Wrapper,\r\n  Container,\r\n  Logo,\r\n  Search,\r\n  // Input,\r\n  Menus,\r\n  MenuItem,\r\n  Avatar,\r\n} from \"./styles\";\r\n\r\nconst Header = () => {\r\n  const { user } = useSelector((state) => state);\r\n\r\n  const history = useHistory();\r\n  return !history.location.pathname.includes(\"share\") ? (\r\n    <Wrapper>\r\n      <Container>\r\n        <Logo\r\n          onClick={() => history.push(\"/\")}\r\n          src=\"https://fontmeme.com/permalink/210823/50ff875ad698b68a5204ae465788590a.png\"\r\n        />\r\n        <Search>\r\n          <Icon type=\"icon-search\" />\r\n          搜索\r\n          {/* <Input placeholder=\"\" /> */}\r\n        </Search>\r\n        <Menus>\r\n          <MenuItem onClick={() => history.push(ROUTES.HOME)}>\r\n            <Icon type=\"icon-home\" />\r\n          </MenuItem>\r\n          <MenuItem onClick={() => history.push(ROUTES.HOME)}>\r\n            <Icon type=\"icon-share\" />\r\n          </MenuItem>\r\n          <MenuItem onClick={() => history.push(ROUTES.SHARE)}>\r\n            <Icon type=\"icon-add\" />\r\n          </MenuItem>\r\n          <MenuItem onClick={() => history.push(ROUTES.HOME)}>\r\n            <Icon type=\"icon-heart\" />\r\n          </MenuItem>\r\n          <MenuItem onClick={() => history.push(\"/p/\" + user.username)}>\r\n            <Avatar src={user.avatar || defaultAvatar} />\r\n          </MenuItem>\r\n        </Menus>\r\n      </Container>\r\n    </Wrapper>\r\n  ) : null;\r\n};\r\n\r\nexport default Header;\r\n","import styled from \"styled-components\";\r\nimport tw from \"twin.macro\";\r\n\r\nexport const Wrapper = styled.div`\r\n  ${tw`pl-4`}\r\n`;\r\n\r\nexport const UserInfo = styled.div`\r\n  ${tw`flex items-center my-4  flex-shrink-0`}\r\n  >div {\r\n    ${tw`flex flex-col px-3 text-sm`}\r\n    strong {\r\n      ${tw`text-black font-semibold\t`}\r\n    }\r\n    span {\r\n      ${tw`text-gray-400`}\r\n    }\r\n  }\r\n`;\r\n\r\nexport const Avatar = styled.img`\r\n  ${tw`w-14 h-14 bg-gray-200 rounded-full object-cover\t`}\r\n`;\r\n\r\nexport const Button = styled.button`\r\n  ${tw`ml-auto text-xs text-blue-400 font-semibold flex-shrink-0`}\r\n  &.gray {\r\n    ${tw`text-gray-700`}\r\n  }\r\n`;\r\n\r\nexport const Recommend = styled.div``;\r\n\r\nexport const Title = styled.div`\r\n  ${tw`flex items-center justify-between`}\r\n  span {\r\n    ${tw`text-sm text-gray-400 font-semibold`}\r\n  }\r\n`;\r\n\r\nexport const ProfileList = styled.div``;\r\n\r\nexport const ProfileItem = styled.div`\r\n  ${tw`flex items-center py-2  flex-shrink-0`}\r\n  >div {\r\n    ${tw`flex flex-col px-3 text-xs`}\r\n    strong {\r\n      ${tw`text-black font-semibold\t`}\r\n    }\r\n    span {\r\n      ${tw`text-gray-400`}\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ProfileAvatar = styled.div`\r\n  ${tw`w-8 h-8 bg-gray-200 rounded-full\t`}\r\n`;\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport defaultAvatar from \"../../assets/images/defaultAvatar.png\";\r\n\r\nimport * as Actions from \"../../context/actions/user\";\r\n\r\nimport {\r\n  Wrapper,\r\n  UserInfo,\r\n  Avatar,\r\n  Button,\r\n  Recommend,\r\n  Title,\r\n  ProfileList,\r\n  ProfileItem,\r\n  ProfileAvatar,\r\n} from \"./styles\";\r\n\r\nconst Sidebar = ({ history }) => {\r\n  const dispatch = useDispatch();\r\n  const { user } = useSelector((state) => state);\r\n  const logout = () => {\r\n    dispatch(Actions.logout);\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <UserInfo>\r\n        <Avatar\r\n          src={defaultAvatar}\r\n          onClick={() => history.push('/p/'+user.username)}\r\n        />\r\n        <div>\r\n          <strong>{ user.username}</strong>\r\n          <span>instagram</span>\r\n        </div>\r\n        <Button onClick={logout}>退出</Button>\r\n      </UserInfo>\r\n      <Recommend>\r\n        <Title>\r\n          <span>为你推荐</span>\r\n          <Button className=\"gray\">查看全部</Button>\r\n        </Title>\r\n        <ProfileList>\r\n          <ProfileItem>\r\n            <ProfileAvatar />\r\n            <div>\r\n              <strong>instagram</strong>\r\n              <span>tip</span>\r\n            </div>\r\n            <Button>关注</Button>\r\n          </ProfileItem>\r\n          <ProfileItem>\r\n            <ProfileAvatar />\r\n            <div>\r\n              <strong>instagram</strong>\r\n              <span>tip</span>\r\n            </div>\r\n            <Button>关注</Button>\r\n          </ProfileItem>\r\n          <ProfileItem>\r\n            <ProfileAvatar />\r\n            <div>\r\n              <strong>instagram</strong>\r\n              <span>tip</span>\r\n            </div>\r\n            <Button>关注</Button>\r\n          </ProfileItem>\r\n        </ProfileList>\r\n      </Recommend>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n"],"sourceRoot":""}