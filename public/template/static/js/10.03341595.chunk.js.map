{"version":3,"sources":["api/index.js","utils/auth.js","pages/login/styles.js","pages/login/index.js","context/actions/user.js"],"names":["API","axios","create","baseURL","interceptors","request","use","req","NProgress","start","user","JSON","parse","localStorage","getItem","token","getToken","headers","authorization","err","Promise","reject","res","done","Wrapper","styled","div","attrs","className","Container","Form","Logo","img","FormItem","Input","input","Tip","Button","button","Bottom","Login","history","useSelector","state","dispatch","useDispatch","useState","formData","setFormData","loading","setLoading","handleInput","target","name","value","src","placeholder","onChange","e","type","avatar","onClick","cb","a","data","post","console","log","LOGIN","payload","message","Actions","push","ROUTES","LoadingOutlined"],"mappings":"6NAMMA,G,MAAMC,IAAMC,OAAO,CAAEC,QAAS,kCAEpCH,EAAII,aAAaC,QAAQC,KACvB,SAACC,GACCC,IAAUC,QACV,IAAMC,ECXc,WAAO,IAAD,EAC5B,iBAAOC,KAAKC,MAAMC,aAAaC,QAAQ,oBAAvC,aAAO,EAA8CC,MDUtCC,GAIb,OAHIN,IACFH,EAAIU,QAAQC,cAAZ,OAA4BR,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAMK,OAE7BR,KAET,SAACY,GACC,OAAOC,QAAQC,OAAOF,MAI1BnB,EAAII,aAAaC,QAAQC,KACvB,SAACgB,GAEC,OADAd,IAAUe,OACHD,KAET,SAACH,GACC,OAAOC,QAAQC,OAAOF,MAIXnB,I,0CE7BFwB,EAAUC,IAAOC,IAAIC,MAAM,CACtCC,UACE,sGAFmBH,CAAH,0BAKPI,EAAYJ,IAAOC,IAAV,kCAChB,8mBAIOI,EAAOL,IAAOC,IAAV,kCACX,gBAGOK,EAAON,IAAOO,IAAV,kCACX,wEAGOC,EAAWR,IAAOC,IAAV,4DACf,kQAGE,uBAIKQ,EAAQT,IAAOU,MAAV,kCACZ,sJAGOC,EAAMX,IAAOC,IAAV,kCACV,yGAGOW,EAASZ,IAAOa,OAAV,kCACb,wfAGOC,EAASd,IAAOC,IAAV,qHAEb,6CAEE,wIAGA,mJ,cC+BOc,UA7DD,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,QACT/B,GADiC,2BAC1BgC,aAAY,SAACC,GAAD,OAAWA,MAC9BC,EAAWC,cAFsB,EAGPC,mBAAS,IAHF,mBAGhCC,EAHgC,KAGtBC,EAHsB,OAITF,oBAAS,GAJA,mBAIhCG,EAJgC,KAIvBC,EAJuB,KAmBjCC,EAAc,SAAC,GAAiC,IAAD,IAA9BC,OAAUC,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,MACrCN,EAAY,eAAGK,EAAOC,KAGxB,OACE,cAAC9B,EAAD,UACE,eAACK,EAAD,WACE,eAACC,EAAD,WACE,cAACC,EAAD,CAAMwB,IAAI,+EACV,cAACtB,EAAD,UACE,cAACC,EAAD,CACEsB,YAAY,yDACZH,KAAK,UACLI,SAAU,SAACC,GACTP,EAAYO,QAIlB,cAACzB,EAAD,UACE,cAACC,EAAD,CACEyB,KAAK,WACLH,YAAY,eACZH,KAAK,WACLI,SAAU,SAACC,GACTP,EAAYO,QAIlB,eAACtB,EAAD,kDAAY1B,EAAKkD,UACjB,cAACvB,EAAD,CAAQwB,QA1CD,WACTZ,IAEJC,GAAW,GACXN,ECzBiB,SAACG,EAAUe,GAAX,8CAAkB,WAAOlB,GAAP,eAAAmB,EAAA,+EJiCjBC,EI/BUjB,EJ+BD/C,EAAIiE,KAAK,cAAeD,GIjChB,OAE7B1C,EAF6B,OAGnC4C,QAAQC,IAAI7C,EAAK,YACjBsB,EAAS,CAAEe,KAAMS,IAAOC,QAAS,KAJE,gDAMnCH,QAAQC,IAAI,KAAMG,QAAS,cANQ,QASrCR,GAAMA,IAT+B,kCJiClB,IAACE,IIjCiB,oBAAlB,sDD0BfO,CAAcxB,GAAU,WACtBmB,QAAQC,IAAI,YACZjB,GAAW,GACXT,EAAQ+B,KAAKC,WAkCX,SACGxB,EAAU,cAACyB,EAAA,EAAD,IAAsB,oBAGrC,eAACnC,EAAD,WACE,oEACA,sBAAMsB,QAAS,kBAAMpB,EAAQ+B,KAAKC,MAAlC","file":"static/js/10.03341595.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport NProgress from \"nprogress\";\r\nimport \"nprogress/nprogress.css\";\r\n\r\nimport { getToken } from \"../utils/auth\";\r\n\r\nconst API = axios.create({ baseURL: \"http://47.98.173.20:5000/api\" });\r\n\r\nAPI.interceptors.request.use(\r\n  (req) => {\r\n    NProgress.start();\r\n    const user = getToken();\r\n    if (user) {\r\n      req.headers.authorization = user?.token;\r\n    }\r\n    return req;\r\n  },\r\n  (err) => {\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nAPI.interceptors.request.use(\r\n  (res) => {\r\n    NProgress.done();\r\n    return res;\r\n  },\r\n  (err) => {\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nexport default API;\r\n\r\n\r\n\r\nexport const login = (data) => API.post(\"/auth/login\", data);\r\n\r\nexport const register = (data) => API.post(\"/auth/register\", data);","export const getToken = () => {\r\n  return JSON.parse(localStorage.getItem(\"userInfo\"))?.token;\r\n};\r\n","import styled from \"styled-components\";\r\nimport tw from \"twin.macro\";\r\n\r\nexport const Wrapper = styled.div.attrs({\r\n  className:\r\n    \"flex flex-col h-screen  pt-12  items-center bg-white sm:pt-0 sm:justify-center  transition ease-in\",\r\n})``;\r\n\r\nexport const Container = styled.div`\r\n  ${tw`bg-white rounded p-6 w-full flex flex-col items-center justify-between\r\n    sm:shadow sm:border sm:border-gray-300 sm:w-96 sm:px-10 sm:pt-10\r\n  `}\r\n`;\r\nexport const Form = styled.div`\r\n  ${tw`w-full`}\r\n`;\r\n\r\nexport const Logo = styled.img`\r\n  ${tw`w-full h-14 object-contain mb-8`}\r\n`;\r\n\r\nexport const FormItem = styled.div`\r\n  ${tw`flex h-10 bg-gray-50 mb-2 p-2 border border-gray-300`}\r\n\r\n  span {\r\n    ${tw`absolute`}\r\n  }\r\n`;\r\n\r\nexport const Input = styled.input`\r\n  ${tw`text-sm w-full bg-transparent focus:outline-none`}\r\n`;\r\n\r\nexport const Tip = styled.div`\r\n  ${tw`text-right text-sm py-2`}\r\n`;\r\n\r\nexport const Button = styled.button`\r\n  ${tw`rounded-sm shadow-md bg-blue-400 w-full h-9 text-white  text-sm flex items-center justify-center`}\r\n`;\r\n\r\nexport const Bottom = styled.div`\r\n  /* border: 1px solid #000; */\r\n  ${tw`py-6`}\r\n  strong {\r\n    ${tw`text-sm font-light\ttext-gray-400`}\r\n  }\r\n  span {\r\n    ${tw`text-sm  text-blue-400 hover:cursor-pointer`}\r\n  }\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport * as Actions from \"../../context/actions/user\";\r\n\r\nimport {\r\n  Wrapper,\r\n  Container,\r\n  Form,\r\n  Logo,\r\n  FormItem,\r\n  Input,\r\n  Tip,\r\n  Button,\r\n  Bottom,\r\n} from \"./styles\";\r\nimport * as ROUTES from \"../../constants/routes\";\r\n\r\nconst Login = ({ history, ...props }) => {\r\n  const user = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n  const [formData, setFormData] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const submit = () => {\r\n    if (loading) return;\r\n\r\n    setLoading(true);\r\n    dispatch(\r\n      Actions.login(formData, () => {\r\n        console.log(\"---13---\");\r\n        setLoading(false);\r\n        history.push(ROUTES.HOME);\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleInput = ({ target: { name, value } }) => {\r\n    setFormData({ [name]: value });\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Container>\r\n        <Form>\r\n          <Logo src=\"https://fontmeme.com/permalink/210823/50ff875ad698b68a5204ae465788590a.png\" />\r\n          <FormItem>\r\n            <Input\r\n              placeholder=\"手机号、帐号或邮箱\"\r\n              name=\"account\"\r\n              onChange={(e) => {\r\n                handleInput(e);\r\n              }}\r\n            />\r\n          </FormItem>\r\n          <FormItem>\r\n            <Input\r\n              type=\"password\"\r\n              placeholder=\"密码\"\r\n              name=\"password\"\r\n              onChange={(e) => {\r\n                handleInput(e);\r\n              }}\r\n            />\r\n          </FormItem>\r\n          <Tip>忘记密码了？{user.avatar}</Tip>\r\n          <Button onClick={submit}>\r\n            {loading ? <LoadingOutlined /> : \"登录\"}\r\n          </Button>\r\n        </Form>\r\n        <Bottom>\r\n          <strong>没有帐号？</strong>\r\n          <span onClick={() => history.push(ROUTES.REGISTER)}>注册</span>\r\n        </Bottom>\r\n      </Container>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import * as API from \"../../api\";\r\nimport { LOGIN, REGISTER } from \"../../constants/actionTypes\";\r\n\r\nexport const login = (formData, cb) => async (dispatch) => {\r\n  try {\r\n    const res = await API.login(formData);\r\n    console.log(res, \"--res---\");\r\n    dispatch({ type: LOGIN, payload: {} });\r\n  } catch (error) {\r\n    console.log(error.message, \"--error---\");\r\n\r\n  }\r\n  cb && cb();\r\n};\r\n"],"sourceRoot":""}